#!/bin/bash

ARG=$1

SHOW_LOCAL=0
SHOW_PUBLIC=0

if [[ $ARG == "local" ]]; then
    SHOW_LOCAL=1
elif [[ $ARG == "public" ]]; then
    SHOW_PUBLIC=1
else
    SHOW_LOCAL=1
    SHOW_PUBLIC=1
fi

if [[ $SHOW_LOCAL -gt 0 ]]; then
    local_ip=$(ip a show wlan0 | grep inet | sed -n 1p | awk '{print $2}');
    [[ $SHOW_PUBLIC -gt 0 ]] && printf "local: "
    echo "$local_ip";
fi

if [[ $SHOW_PUBLIC -gt 0 ]]; then
    public_ip=$(dog +short myip.opendns.com @resolver1.opendns.com | tail -n 1 | cut -d' ' -f 14)
    [[ $SHOW_LOCAL -gt 0 ]] && printf "public: "
    echo "$public_ip";
fi
